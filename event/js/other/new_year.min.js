!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([,function(e,t,i){i(2),e.exports=i(3)},function(e,t){new Vue({el:"#year-container",data:{isRule:!1,isSelect:!1,message:"立下你的新年的目標<br>像嶄新的2021邁出第一步吧",isTitle:!0,flagText:[],flagNum:0,flagName:"",currPage:1,perPage:5,flags:[],selectText:[],otherFlag:"",isCreate:!1,colors:{hexs:["#ff4b30","#f75c2f","#ffc408","#90b44b","#00aa90","#30a8de","#986db2","#e16b8c"],"#ff4b30":["#854438","#994636","#c83c36","#e63118","#ff4b30","#ff6851","#f39382","#ffbeb4"],"#f75c2f":["#a35838","#b25c37","#d84a20","#f75c2f","#ff6224","#fa7048","#ff8f5d","#ffbd87"],"#ffc408":["#bc9342","#dbaa44","#eebb23","#f7c142","#ffc408","#ffd13f","#ffe181","#fad78b"],"#90b44b":["#2c6b48","#526d41","#667d39","#829a54","#90b44b","#8caf7c","#86c067","#b4caa0"],"#00aa90":["#1f5f4f","#1d7865","#00886c","#138b78","#04aa90","#20ceb3","#86dacd","#99ecdf"],"#30a8de":["#13376a","#0d5ca1","#147598","#228dae","#30a8de","#58b2de","#7ab9df","#a5dee4"],"#986db2":["#593b67","#6d4087","#753d86","#7e4f8c","#986db2","#8a6bbe","#8f77b4","#9b91c1"],"#e16b8c":["#8f354c","#b53d5a","#cb1b45","#db4d6d","#e16b8c","#e77a92","#f699ab","#f3a7b9"]},images:["./dist/images/people/01.png","./dist/images/people/04.png","./dist/images/people/05.png","./dist/images/people/06.png","./dist/images/people/07.png","./dist/images/people/08.png","./dist/images/people/09.png","./dist/images/people/11.png","./dist/images/people/12.png","./dist/images/people/13.png","./dist/images/people/14.png","./dist/images/people/15.png"],activeItem:0,gradItem:0,changeColor:"#ff4b30",changeColorKey:"#ff4b30",changeImage:"./dist/images/people/01.png",isFinnal:!1,settingActive:"color",startX:0,startY:0,move:"20px",stepType:!1,stepText:"繼續",isCreateInner:!0,imageMove:0,imageM:0,colorMove:0,goBottom:"",changeRotate:"",rotate:0,isCount:!1,showBoxAnimate:"",cardImage:"",signName:"",today:"",countNumber:3,step:"image",islastBtn:!0,animated:!1,animate2:!1,prev:"goSec",isFinBtn:!1},mounted:function(){var e=this,t=document.getElementById("canvas");t.width=window.innerWidth,t.height=window.innerHeight,fetch("./flag_v2.json").then((function(e){return e.json()})).then((function(t){return e.flagText=t})),setInterval((function(){e.getTime()}),1e3),localStorage.clear()},updated:function(){localStorage.setItem("flag",JSON.stringify(this.selectText))},computed:{pageStart:function(){return(this.currPage-1)*this.perPage},totalPage:function(){return Math.ceil(this.flagText.length/this.perPage)}},methods:{start:function(){this.isTitle=!1,this.isRule=!0},stageFirst:function(){this.isRule=!1,this.isSelect=!0},stageNext:function(e){if("second"==e)this.goBottom="translateY(0)",this.isSelect=!1,this.isCreate=!0;else if("third"==e){var t=event.target.getAttribute("value");"color"==t?this.bottomSelect("image"):"sign"==t?this.bottomSelect("sign"):"image"==t?this.bottomSelect("image"):"finnal"==t&&this.goShowFinal()}else if("second-return"==e){var i=event.target.getAttribute("value");"color"==i?this.bottomSelect("color"):"image"==i?this.bottomSelect("image"):"goSec"==i&&(this.goBottom="translateY(300%)",this.isCreate=!1,this.isSelect=!0,this.animated=!1)}},count:function(){if(this.flagNum>7)return alert("最多只能選8個!"),!1;if(null!==event.target.getAttribute("value")){if(this.selectText.indexOf(event.target.getAttribute("value"))>-1)return alert("已選過囉!"),!1;this.selectText.push(event.target.getAttribute("value"));var e=this.checkRepeat(this.selectText);this.selectText=e}var t=document.querySelector(".bright");this.animated=!0,t.classList.add("animated"),this.flagNum++,setTimeout((function(){this.animated=!1,this.animate2=!0,t.classList.remove("animated"),t.classList.add("animate2")}),300),setTimeout((function(){t.classList.remove("animate2"),this.animate2=!1}),750)},changeFlag:function(e){(e<=0||e>this.totalPage)&&(e=1),this.currPage=e,this.rotate+=360,this.changeRotate="rotate("+this.rotate+"deg)",setTimeout((function(){this.rotate=0}),50)},checkRepeat:function(e){return e.filter((function(t,i){return e.indexOf(t)===i}))},sendText:function(){return""==this.otherFlag?(alert("請輸入願望!"),!1):this.flagNum>7?(alert("最多只能選8個!"),!1):this.selectText.indexOf(event.target.getAttribute("value"))>-1?(alert("已選過囉!"),this.otherFlag="",!1):this.otherFlag.length>=13?(alert("不能超過12個字!"),!1):(this.selectText.push(this.otherFlag),void this.flagNum++)},closebtn:function(){this.showBoxAnimate="translateY(-300%)"},showFlag:function(){this.showBoxAnimate="translateY(0)"},closeBox:function(){this.showBoxAnimate="translateY(-300%)"},deleteFlag:function(){if(this.flagNum<=0)this.flagNum=0;else{this.flagNum--;var e=event.target.parentNode.getAttribute("value");this.selectText.splice(e,1)}},selectColor:function(e){this.activeItem=e;var t=event.target.getAttribute("value");this.changeColor=t,this.changeColorKey=t},selectImage:function(){var e=event.target.getAttribute("value");this.changeImage=e},bottomSelect:function(e){this.settingActive=e,"image"==e?(this.step="sign",this.prev="color",this.islastBtn=!0,this.isFinBtn=!1):"color"==e?(this.step="image",this.prev="goSec",this.islastBtn=!0,this.isFinBtn=!1):"sign"==e&&(this.step,this.prev="image",this.islastBtn=!1,this.isFinBtn=!0)},isActive:function(e){return e===this.settingActive},touchstart:function(){var e=event.targetTouches[0];this.startX=e.pageX,this.startY=event.changedTouches[0].pageY;var t=event.changedTouches[0].pageX,i=event.changedTouches[0].pageY,n=(this.startX,this.startY,event.touches[0].pageX);n<=this.startX?n=this.startX-20:n>=382&&(n=382),this.move=n+"px";var a=parseInt(n/30);this.changeColor=this.colors[this.changeColorKey][a]},touchmove:function(){event.preventDefault();var e=event.targetTouches[0];this.startX=e.pageX;var t=event.touches[0].pageX,i=document.querySelector(".gradient").offsetWidth-35,n=0;t<=28?t=28:t>=i&&(t=i),this.move=t+"px",n=window.innerHeight<570?39:window.innerWidth<376?40:45;var a=parseInt(t/n);this.changeColor=this.colors[this.changeColorKey][a]},getTime:function(){var e=new Date,t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();this.today=t},timerCount:function(){var e=this;this.countNumber>1&&setTimeout((function(){e.countNumber--,e.timerCount()}),1e3)},goShowFinal:function(){var e=this;if(""==this.signName)return alert("請簽下大名!"),!1;window.scroll(0,0),this.goBottom="translateY(100%)",document.querySelector(".bottom-create").style.display="none";var t=document.querySelector("#create-area").offsetHeight,i=document.querySelector("#create-area").offsetWidth;html2canvas(document.querySelector("#create-area"),{useCORS:!0,width:i,height:t,backgroundColor:"rgba(0,0,0,.0)",scale:2,allowTaint:!1,onrendered:canvas}).then((function(e){var t=e.getContext("2d"),i=new Image;t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1,i.id="save-image",i.crossOrigin="anonymous",i.src=e.toDataURL("image/png",1),localStorage.setItem("savedImage",i.src)})),this.isCreateInner=!1,this.isCount=!0,this.timerCount(),setTimeout((function(){alert("冷知識: 長按圖片可儲存至手機"),e.isCreate=!1,e.cardImage=localStorage.getItem("savedImage"),e.isFinnal=!0,confetti.start()}),3e3),setTimeout((function(){confetti.remove()}),7500)}}});window.onload=function(){document.querySelector(".box-bg ul");var e=document.getElementById("select-area"),t=document.getElementById("create-area"),i=document.getElementsByClassName("card-footer").querySelector(".qrcord");i.querySelector("img").src="https://events.tk3c.com/events_net/events_net/2021hope/dist/images/share_04_1225.png";var n=document.createElement("a"),a=document.createElement("img");a.src="https://events.tk3c.com/events_net/events_net/2021hope/dist/images/qrcord_new.png",n.className="qr-image",n.appendChild(a),i.appendChild(n);var o=document.body.clientHeight||document.documentElement.clientHeight;window.onresize=function(){(document.documentElement.clientHeight||document.body.clientHeight)<o&&(e.style.height=o,t.style.height=o)},navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]>=12&&window.scroll(0,Math.max(document.body.clientHeight,document.documentElement.clientHeight))}},function(e,t,i){}]);