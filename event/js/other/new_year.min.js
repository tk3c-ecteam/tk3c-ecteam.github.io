!function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){a(1),e.exports=a(2)},function(e,t){new Vue({el:"#year-container",data:{isRule:!1,isSelect:!1,message:"立下你的新年的目標<br>像嶄新的2021邁出第一步吧",isTitle:!0,flagText:[],flagNum:0,flagName:"",currPage:1,perPage:5,flags:[],selectText:[],otherFlag:"",isCreate:!1,colors:{hexs:["#ff4b30","#f75c2f","#ffc408","#90b44b","#00aa90","#30a8de","#986db2","#e16b8c"],"#ff4b30":["#854438","#994636","#c83c36","#e63118","#ff4b30","#ff6851","#f39382","#ffbeb4"],"#f75c2f":["#a35838","#b25c37","#d84a20","#f75c2f","#ff6224","#fa7048","#ff8f5d","#ffbd87"],"#ffc408":["#bc9342","#dbaa44","#eebb23","#f7c142","#ffc408","#ffd13f","#ffe181","#fad78b"],"#90b44b":["#2c6b48","#526d41","#667d39","#829a54","#90b44b","#8caf7c","#86c067","#b4caa0"],"#00aa90":["#1f5f4f","#1d7865","#00886c","#138b78","#04aa90","#20ceb3","#86dacd","#99ecdf"],"#30a8de":["#13376a","#0d5ca1","#147598","#228dae","#30a8de","#58b2de","#7ab9df","#a5dee4"],"#986db2":["#593b67","#6d4087","#753d86","#7e4f8c","#986db2","#8a6bbe","#8f77b4","#9b91c1"],"#e16b8c":["#8f354c","#b53d5a","#cb1b45","#db4d6d","#e16b8c","#e77a92","#f699ab","#f3a7b9"]},images:["./dist/images/people/01.png","./dist/images/people/04.png","./dist/images/people/05.png","./dist/images/people/06.png","./dist/images/people/07.png","./dist/images/people/08.png","./dist/images/people/09.png","./dist/images/people/11.png","./dist/images/people/12.png","./dist/images/people/13.png","./dist/images/people/14.png","./dist/images/people/15.png"],activeItem:0,gradItem:0,changeColor:"#ff4b30",changeColorKey:"#ff4b30",changeImage:"./dist/images/people/01.png",isFinnal:!1,settingActive:"color",startX:0,startY:0,move:"20px",stepType:!1,stepText:"繼續",isCreateInner:!0,imageMove:0,imageM:0,colorMove:0,goBottom:"",changeRotate:"",rotate:0,isCount:!1,showBoxAnimate:"",cardImage:"",signName:"",today:"",countNumber:3,step:"image",islastBtn:!0,animated:!1,animate2:!1,prev:"goSec"},mounted(){var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight,fetch("./flag_v2.json").then(e=>e.json()).then(e=>this.flagText=e),setInterval(()=>{this.getTime()},1e3),localStorage.clear()},updated(){localStorage.setItem("flag",JSON.stringify(this.selectText))},computed:{pageStart(){return(this.currPage-1)*this.perPage},totalPage(){return Math.ceil(this.flagText.length/this.perPage)}},methods:{start(){this.isTitle=!1,this.isRule=!0},stageFirst(){this.isRule=!1,this.isSelect=!0},stageNext(e){if("second"==e)this.goBottom="translateY(0)",this.isSelect=!1,this.isCreate=!0;else if("third"==e){var t=event.target.getAttribute("value");"color"==t?this.bottomSelect("image"):"sign"==t?this.bottomSelect("sign"):"image"==t?this.bottomSelect("image"):"finnal"==t&&this.goShowFinal()}else if("second-return"==e){var a=event.target.getAttribute("value");"color"==a?this.bottomSelect("color"):"image"==a?this.bottomSelect("image"):"goSec"==a&&(this.goBottom="translateY(300%)",this.isCreate=!1,this.isSelect=!0)}},count(){if(this.flagNum>7)return alert("最多只能選8個!"),!1;if(null!==event.target.getAttribute("value")){if(this.selectText.indexOf(event.target.getAttribute("value"))>-1)return alert("已選過囉!"),!1;this.selectText.push(event.target.getAttribute("value"));var e=this.checkRepeat(this.selectText);this.selectText=e}var t=document.querySelector(".bright");this.animated=!0,t.classList.add("animated"),this.flagNum++,setTimeout((function(){this.animated=!1,this.animate2=!0,t.classList.remove("animated"),t.classList.add("animate2")}),300),setTimeout((function(){t.classList.remove("animate2"),this.animate2=!1}),750)},changeFlag(e){(e<=0||e>this.totalPage)&&(e=1),this.currPage=e,this.rotate+=360,this.changeRotate="rotate("+this.rotate+"deg)",setTimeout((function(){this.rotate=0}),50)},checkRepeat:e=>e.filter((t,a)=>e.indexOf(t)===a),sendText(){return""==this.otherFlag?(alert("請輸入願望!"),!1):this.flagNum>7?(alert("最多只能選8個!"),!1):this.selectText.indexOf(event.target.getAttribute("value"))>-1?(alert("已選過囉!"),this.otherFlag="",!1):this.otherFlag.length>=13?(alert("不能超過12個字!"),!1):(this.selectText.push(this.otherFlag),void this.flagNum++)},closebtn(){this.showBoxAnimate="translateY(-300%)"},showFlag(){this.showBoxAnimate="translateY(0)"},closeBox(){this.showBoxAnimate="translateY(-300%)"},deleteFlag(){if(this.flagNum<=0)this.flagNum=0;else{this.flagNum--;var e=event.target.parentNode.getAttribute("value");this.selectText.splice(e,1)}},selectColor(e){this.activeItem=e;var t=event.target.getAttribute("value");this.changeColor=t,this.changeColorKey=t},selectImage(){var e=event.target.getAttribute("value");this.changeImage=e},bottomSelect(e){this.settingActive=e,"image"==e?(this.step="sign",this.prev="color",this.islastBtn=!0):"color"==e?(this.step="image",this.prev="goSec",this.islastBtn=!0):"sign"==e&&(this.step,this.prev="image",this.islastBtn=!1)},isActive(e){return e===this.settingActive},touchstart(){var e=event.targetTouches[0];this.startX=e.pageX,this.startY=event.changedTouches[0].pageY;var t=event.changedTouches[0].pageX,a=event.changedTouches[0].pageY,i=(this.startX,this.startY,event.touches[0].pageX);i<=this.startX?i=this.startX-20:i>=382&&(i=382),this.move=i+"px";var s=parseInt(i/30);this.changeColor=this.colors[this.changeColorKey][s]},touchmove(){event.preventDefault();var e=event.targetTouches[0];this.startX=e.pageX;var t=event.touches[0].pageX,a=document.querySelector(".gradient").offsetWidth-35,i=0;t<=30?t=18:t>=a&&(t=a),this.move=t+"px",i=window.innerHeight<570?39:window.innerWidth<376?40:45;var s=parseInt(t/i);console.log(i),this.changeColor=this.colors[this.changeColorKey][s]},getTime(){var e=new Date,t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();this.today=t},timerCount(){this.countNumber>1&&setTimeout(()=>{this.countNumber--,this.timerCount()},1e3)},goShowFinal(){if(""==this.signName)return alert("請簽下大名!"),!1;window.scroll(0,0),this.goBottom="translateY(100%)",document.querySelector(".bottom-create").style.display="none";var e=document.querySelector("#create-area").offsetHeight,t=document.querySelector("#create-area").offsetWidth;html2canvas(document.querySelector("#create-area"),{useCORS:!0,width:t,height:e,backgroundColor:"rgba(0,0,0,.0)",scale:2,logging:!0,onrendered:canvas}).then(e=>{var t=e.getContext("2d"),a=new Image;t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1,a.id="save-image",a.crossOrigin="anonymous",a.src=e.toDataURL("image/png",1),localStorage.setItem("savedImage",a.src)}),this.isCreateInner=!1,this.isCount=!0,this.timerCount(),setTimeout(()=>{this.isCreate=!1,this.cardImage=localStorage.getItem("savedImage"),this.isFinnal=!0,confetti.start()},3e3),setTimeout(()=>{confetti.remove()},6e3)}}});window.onload=()=>{var e=document.querySelector(".box-bg ul");new Sortable(e,{filter:".delete-flag",dataIdAttr:"data-id",sort:!0})}},function(e,t,a){}]);