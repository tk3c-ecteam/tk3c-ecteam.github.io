!function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([,function(e,t,a){a(2),e.exports=a(3)},function(e,t){new Vue({el:"#year-container",data:{isRule:!1,isSelect:!1,message:"立下你的新年的目標<br>像嶄新的2021邁出第一步吧",isTitle:!0,flagText:[],flagNum:0,flagName:"",currPage:1,perPage:5,flags:[],selectText:[],otherFlag:"",isCreate:!1,colors:{hexs:["#ff4b30","#f75c2f","#ffc408","#90b44b","#00aa90","#30a8de","#986db2","#e16b8c"],"#ff4b30":["#854438","#994636","#c83c36","#e63118","#ff4b30","#ff6851","#f39382","#ffbeb4"],"#f75c2f":["#a35838","#b25c37","#d84a20","#f75c2f","#ff6224","#fa7048","#ff8f5d","#ffbd87"],"#ffc408":["#bc9342","#dbaa44","#eebb23","#f7c142","#ffc408","#ffd13f","#ffe181","#fad78b"],"#90b44b":["#2c6b48","#526d41","#667d39","#829a54","#90b44b","#8caf7c","#86c067","#b4caa0"],"#00aa90":["#1f5f4f","#1d7865","#00886c","#138b78","#04aa90","#20ceb3","#86dacd","#99ecdf"],"#30a8de":["#13376a","#0d5ca1","#147598","#228dae","#30a8de","#58b2de","#7ab9df","#a5dee4"],"#986db2":["#593b67","#6d4087","#753d86","#7e4f8c","#986db2","#8a6bbe","#8f77b4","#9b91c1"],"#e16b8c":["#8f354c","#b53d5a","#cb1b45","#db4d6d","#e16b8c","#e77a92","#f699ab","#f3a7b9"]},images:["./dist/images/people/01.png","./dist/images/people/04.png","./dist/images/people/05.png","./dist/images/people/06.png","./dist/images/people/07.png","./dist/images/people/08.png","./dist/images/people/09.png","./dist/images/people/11.png","./dist/images/people/12.png","./dist/images/people/13.png","./dist/images/people/14.png","./dist/images/people/15.png"],activeItem:0,gradItem:0,changeColor:"#ff4b30",changeColorKey:"#ff4b30",changeImage:"./dist/images/people/01.png",isFinnal:!1,settingActive:"color",startX:0,startY:0,move:0,stepType:!1,stepText:"繼續",isCreateInner:!0,imageMove:0,imageM:0,colorMove:0,goBottom:"",changeRotate:"",rotate:0,isCount:!1,showBoxAnimate:"",cardImage:"",signName:"",today:"",countNumber:3,step:"image",islastBtn:!0,isBrightShow:!1},mounted(){var e=document.getElementsByTagName("canvas")[0];e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,fetch("./flag_v2.json").then(e=>e.json()).then(e=>this.flagText=e),setInterval(()=>{this.getTime()},1e3),localStorage.clear()},updated(){localStorage.setItem("flag",JSON.stringify(this.selectText))},computed:{pageStart(){return(this.currPage-1)*this.perPage},totalPage(){return Math.ceil(this.flagText.length/this.perPage)}},watch:{flags:function(e,t){console.log("change",e,t)},selectText:{handler:function(){console.log("22222222")}}},methods:{start(){this.isTitle=!1,this.isRule=!0},stageFirst(){this.isRule=!1,this.isSelect=!0},stageNext(e){if("second"==e)this.goBottom="translateY(0)",this.isSelect=!1,this.isCreate=!0;else if("third"==e){var t=event.target.getAttribute("value");"color"==t?this.bottomSelect("image"):"sign"==t?this.bottomSelect("sign"):"image"==t?this.bottomSelect("image"):"finnal"==t&&this.goShowFinal()}else"second-return"==e&&(this.goBottom="translateY(300%)",this.isCreate=!1,this.isSelect=!0)},count(){if(this.flagNum>7)return alert("最多只能選8個!"),!1;if(null!==event.target.getAttribute("value")){if(this.selectText.indexOf(event.target.getAttribute("value"))>-1)return alert("已選過囉!"),!1;this.isBrightShow=!0,this.selectText.push(event.target.getAttribute("value"));var e=this.checkRepeat(this.selectText);this.selectText=e,setTimeout((function(){this.isBrightShow=!1,console.log("11111")}),500)}this.flagNum++},changeFlag(e){(e<=0||e>this.totalPage)&&(e=1),this.currPage=e,this.rotate+=360,this.changeRotate="rotate("+this.rotate+"deg)",setTimeout((function(){this.rotate=0}),50)},checkRepeat:e=>e.filter((t,a)=>e.indexOf(t)===a),sendText(){if(""!=this.otherFlag)if(this.flagNum>7)alert("最多只能選8個!");else{if(this.selectText.indexOf(event.target.getAttribute("value"))>-1)return alert("已選過囉!"),!1;if(this.otherFlag.length>=13)return alert("不能超過12個字!"),!1;this.selectText.push(this.otherFlag),this.flagNum++,this.otherFlag=""}else alert("請輸入願望!")},closebtn(){this.showBoxAnimate="translateY(-300%)"},showFlag(){this.showBoxAnimate="translateY(0)"},closeBox(){this.showBoxAnimate="translateY(-300%)"},deleteFlag(){if(this.flagNum<=0)this.flagNum=0;else{this.flagNum--;var e=event.target.parentNode.getAttribute("value");this.selectText.splice(e,1)}},selectColor(e){this.activeItem=e;var t=event.target.getAttribute("value");this.changeColor=t,this.changeColorKey=t},selectImage(){var e=event.target.getAttribute("value");this.changeImage=e},bottomSelect(e){this.settingActive=e,"image"==e?(this.step="sign",this.islastBtn=!0):"color"==e?(this.step="image",this.islastBtn=!0):"sign"==e&&(this.step,this.islastBtn=!1)},isActive(e){return e===this.settingActive},touchstart(){this.startX=event.changedTouches[0].pageX,this.startY=event.changedTouches[0].pageY;var e=event.changedTouches[0].pageX,t=event.changedTouches[0].pageY;console.log(this.startX);this.startX,this.startY;var a=event.touches[0].pageX;a<=0?a=0:a>=382&&(a=382),this.move=a+"px";var s=parseInt(a/30);this.changeColor=this.colors[this.changeColorKey][s]},touchmove(){event.preventDefault();var e=event.changedTouches[0].pageX,t=event.changedTouches[0].pageY,a=(this.startX,this.startY,event.touches[0].pageX);a<=0?a=0:a>=330&&(a=330),this.move=a+"px";var s=parseInt(a/45);this.changeColor=this.colors[this.changeColorKey][s]},touchColorMove(){this.startX=event.changedTouches[0].pageX;event.changedTouches[0].pageX;var e=event.touches[0].pageX;this.colorMove=-1*e+"px"},touchImageStart(){this.startX=event.changedTouches[0].pageX},touchImageMove(){var e=event.changedTouches[0].pageX,t=(this.startX,event.touches[0].pageX);t<=0?t=e:t>=2e3&&(t=2e3),this.imageMove=-1*t+"px"},getTime(){var e=new Date,t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();this.today=t},timerCount(){this.countNumber>1&&setTimeout(()=>{this.countNumber--,this.timerCount()},1e3)},goShowFinal(){if(""==this.signName)return alert("請簽下大名!"),!1;this.goBottom="translateY(100%)",document.querySelector(".bottom-create").style.display="none";var e=document.querySelector("#create-area").offsetHeight,t=document.querySelector("#create-area").offsetWidth;window.devicePixelRatio;html2canvas(document.querySelector("#create-area"),{useCORS:!0,width:t,height:e}).then(e=>{var t=new Image;t.id="save-image",t.crossOrigin="anonymous",t.src=e.toDataURL(),localStorage.setItem("savedImage",t.src)}),this.isCreateInner=!1,this.isCount=!0,this.timerCount(),setTimeout(()=>{this.isCreate=!1,this.cardImage=localStorage.getItem("savedImage"),this.isFinnal=!0},3e3)}}});window.onload=()=>{var e=document.querySelector(".box-bg ul");Sortable.create(e)}},function(e,t,a){}]);